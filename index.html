<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BIO 210 Cell Cycle Review</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useEffect, useMemo, useState } = React;

    // =================== DATA ===================
    const DATA_SETS = {
      'l8_9': {
        title: 'Lecture 8-9: Mitosis, Meiosis & Cell Cycle',
        raw: `1. What is one of the three components of the Cell Theory mentioned in the document?
o a) Cells are created from non-living matter
o b) All living organisms are composed of cells
o c) Cells do not reproduce
o d) Cells are only found in plants

2. Which phase of the cell cycle is also known as the "resting phase" but is actually a busy preparatory phase?
o a) Mitotic Phase
o b) Interphase
o c) G0 Phase
o d) S Phase

3. How long does interphase typically last in most cells according to the document?
o a) 5 hours
o b) 10 hours
o c) 21–22 hours
o d) 2 hours

4. During which stage of interphase do cells increase in size and duplicate organelles?
o a) S Phase
o b) G1 Phase
o c) G2 Phase
o d) M Phase

5. What is the primary activity during the S phase of the cell cycle?
o a) Cell division
o b) DNA replication
o c) Organelle duplication
o d) Preparation for cytokinesis

6. Which phase follows the S phase and precedes the mitotic phase?
o a) G1 Phase
o b) G2 Phase
o c) G0 Phase
o d) Interkinesis

7. What is the role of the G0 phase in the cell cycle?
o a) DNA synthesis
o b) Cell division
o c) Quiescence where cells do not prepare for division
o d) Chromosome separation

8. Which of the following is a checkpoint in the cell cycle that ensures proper progression?
o a) G1 checkpoint
o b) S checkpoint
o c) G2 checkpoint
o d) All of the above

9. What enzyme initiates apoptosis as described in the document?
o a) DNA Polymerase
o b) Caspases
o c) Kinetochores
o d) Actin

10. Why is the balance between cell division and apoptosis important?
o a) To increase cell size
o b) To maintain homeostasis by removing unwanted cells and promoting growth
o c) To prevent genetic variation
o d) To speed up DNA replication

11. What is the first stage of mitosis where chromosomes become visible?
o a) Prophase
o b) Metaphase
o c) Anaphase
o d) Telophase

12. During which phase of mitosis do chromosomes line up at the metaphase plate?
o a) Prophase
o b) Metaphase
o c) Anaphase
o d) Telophase

13. What structure holds sister chromatids together until they separate in mitosis?
o a) Centromere
o b) Centrosome
o c) Spindle fibers
o d) Nucleolus

14. In which phase of mitosis do sister chromatids separate to become daughter chromosomes?
o a) Prophase
o b) Metaphase
o c) Anaphase
o d) Telophase

15. What happens to the nuclear envelope during prophase of mitosis?
o a) It reforms
o b) It fragments and disappears
o c) It doubles in thickness
o d) It remains intact

16. What is the function of centrosomes in animal cells during mitosis?
o a) To synthesize DNA
o b) To organize the mitotic spindle for chromosome movement
o c) To form the cell plate
o d) To initiate apoptosis

17. How does cytokinesis occur in animal cells?
o a) By forming a cell plate
o b) By forming a cleavage furrow with contractile proteins
o c) By duplicating the nucleus
o d) By aligning chromosomes

18. What is the result of mitosis in terms of the number and ploidy of daughter cells?
o a) Four haploid cells
o b) Two diploid cells
o c) One diploid cell
o d) Four diploid cells

19. Which of the following is a key function of mitosis in multicellular organisms?
o a) Producing gametes
o b) Asexual reproduction and tissue repair
o c) Reducing chromosome number
o d) Creating genetic variation

20. During which phase of mitosis do spindles disappear and new nuclear envelopes form?
o a) Prophase
o b) Metaphase
o c) Anaphase
o d) Telophase

21. What protein is primarily responsible for forming the cleavage furrow in animal cell cytokinesis?
o a) Caspases
o b) Actin
o c) Kinetochores
o d) Centrioles

22. Why is mitosis considered a form of asexual reproduction?
o a) It involves two parents
o b) Daughter cells are genetically identical to the parent cell
o c) It produces haploid cells
o d) It includes crossing over

23. What happens if cytokinesis fails to occur after mitosis?
o a) The cell becomes multinucleated
o b) The cell undergoes apoptosis immediately
o c) The cell enters G0 phase
o d) The cell doubles its DNA again

24. In plant cells, what structure forms between daughter cells during cytokinesis?
o a) Cleavage furrow
o b) Cell plate
o c) Spindle fibers
o d) Centromere

25. Which phase of mitosis is typically the shortest?
o a) Prophase
o b) Metaphase
o c) Anaphase
o d) Telophase

26. What is the main role of the mitotic spindle during cell division?
o a) To replicate DNA
o b) To separate chromosomes to opposite poles
o c) To form the nuclear envelope
o d) To initiate cell growth

27. During which stage of mitosis do chromosomes condense from chromatin?
o a) Interphase
o b) Prophase
o c) Metaphase
o d) Anaphase

28. What structure in animal cells divides to help organize the mitotic spindle?
o a) Centromere
o b) Centrosome
o c) Nucleolus
o d) Kinetochore

29. How many daughter cells are produced from one mitotic division?
o a) One
o b) Two
o c) Three
o d) Four

30. What is the genetic relationship between parent and daughter cells in mitosis?
o a) Genetically different
o b) Genetically identical
o c) Haploid to diploid
o d) Diploid to haploid

31. What is the primary purpose of meiosis in sexual reproduction?
o a) To produce identical somatic cells
o b) To produce gametes with half the chromosome number and genetic variation
o c) To repair tissues
o d) To increase cell size

32. How many nuclear divisions are there in meiosis?
o a) One
o b) Two
o c) Three
o d) Four

33. During which phase of meiosis does crossing over between homologous chromosomes occur?
o a) Prophase I
o b) Metaphase I
o c) Prophase II
o d) Metaphase II

34. What is a bivalent in the context of meiosis?
o a) A single chromatid
o b) A pair of homologous chromosomes during synapsis
o c) The mitotic spindle
o d) The cell plate

35. What occurs during anaphase I of meiosis?
o a) Sister chromatids separate
o b) Homologous chromosomes separate
o c) Chromosomes align at the metaphase plate
o d) DNA is replicated

36. How many daughter cells are produced by the end of meiosis II?
o a) Two diploid cells
o b) Four haploid cells
o c) Two haploid cells
o d) Four diploid cells

37. What is the ploidy level of cells immediately after meiosis I?
o a) Diploid (2n)
o b) Haploid (n)
o c) Tetraploid (4n)
o d) Polyploid

38. During which stage of meiosis do homologous chromosomes align independently at the metaphase plate?
o a) Prophase I
o b) Metaphase I
o c) Anaphase I
o d) Telophase I

39. What is the significance of independent assortment during meiosis?
o a) It ensures all daughter cells are identical
o b) It increases genetic variation by random chromosome separation
o c) It prevents crossing over
o d) It doubles the DNA content

40. What happens during interkinesis in meiosis?
o a) DNA replication occurs
o b) A short rest period occurs with no DNA replication
o c) Sister chromatids separate
o d) A cell plate forms

41. How does prophase II differ from prophase I in meiosis?
o a) Prophase II includes crossing over and synapsis
o b) Prophase II has no synapsis or crossing over
o c) Prophase II occurs in diploid cells only
o d) Prophase II involves homologous chromosome pairing

42. In humans, how many chromosomes are present in each gamete after meiosis?
o a) 23
o b) 46
o c) 92
o d) 12

43. Which process restores the diploid number of chromosomes in humans after meiosis?
o a) Mitosis
o b) Meiosis
o c) Fertilization
o d) Apoptosis

44. What is the result of meiosis in males (spermatogenesis)?
o a) One egg and polar bodies
o b) Four sperm cells
o c) Two diploid cells
o d) No viable cells

45. What is the role of chiasmata in meiosis?
o a) They hold sister chromatids together
o b) They are the points where crossing over occurs between homologous chromosomes
o c) They form the mitotic spindle
o d) They initiate cytokinesis

46. How many possible gamete combinations can result from independent assortment in humans with 23 chromosome pairs?
o a) 2^23
o b) 2^46
o c) 23^2
o d) 46^2

47. Which phase of meiosis reduces the chromosome number from 2n to n?
o a) Meiosis I
o b) Meiosis II
o c) Both Meiosis I and II
o d) Neither

48. What is a key difference between mitosis and meiosis in terms of genetic outcome?
o a) Mitosis produces genetic variation; meiosis does not
o b) Meiosis produces genetic variation; mitosis does not
o c) Both produce genetically identical cells
o d) Neither produces any variation

49. During which phase of meiosis do sister chromatids finally separate to become daughter chromosomes?
o a) Anaphase I
o b) Anaphase II
o c) Metaphase I
o d) Telophase I

50. Why is genetic variation from meiosis critical for species survival?
o a) It ensures all cells are genetically identical
o b) It allows for adaptation and long-term survival through diversity
o c) It prevents all mutations
o d) It increases the number of chromosomes

Answer Key
1. b
2. b
3. c
4. b
5. b
6. b
7. c
8. d
9. b
10. b
11. a
12. b
13. a
14. c
15. b
16. b
17. b
18. b
19. b
20. d
21. b
22. b
23. a
24. b
25. c
26. b
27. b
28. b
29. b
30. b
31. b
32. b
33. a
34. b
35. b
36. b
37. b
38. b
39. b
40. b
41. b
42. a
43. c
44. b
45. b
46. a
47. a
48. b
49. b
50. b`
      },
    };
    // =================== END DATA ===================

    function App() {
      const [selectedSets, setSelectedSets] = useState({ 'l8_9': true });
      const [answers, setAnswers] = useState({});
      const [revealed, setRevealed] = useState({});
      const [shuffledOrder, setShuffledOrder] = useState([]);
      const [shuffle, setShuffle] = useState(true);
      const [shuffleOptions, setShuffleOptions] = useState(false);
      const [currentIndex, setCurrentIndex] = useState(0);

      const combinedData = useMemo(() => {
        let questionText = [];
        let keyText = [];

        Object.keys(selectedSets).forEach(key => {
          if (selectedSets[key] && DATA_SETS[key]) {
            const raw = DATA_SETS[key].raw;
            const parts = raw.split(/\s*Answer Key\s*\n/);
            questionText.push(parts[0] || "");
            if (parts[1]) keyText.push(parts[1]);
          }
        });

        const combinedRaw = questionText.join('\n\n') + '\n\nAnswer Key\n' + keyText.join('\n');
        const parsedResult = parseQuestions(combinedRaw);
        return parsedResult;
      }, [selectedSets]);

      useEffect(() => {
        const n = combinedData.questions.length;
        const base = [...Array(n).keys()];
        const order = shuffle ? shuffleArray(base) : base;
        setShuffledOrder(order);
        setCurrentIndex(0);
      }, [combinedData.questions.length, shuffle]);

      const total = combinedData.questions.length;
      const qIndex = shuffledOrder[currentIndex] ?? 0;
      const q = combinedData.questions[qIndex];
      const value = answers[qIndex];
      const shown = !!revealed[qIndex];

      const displayedOptions = useMemo(() => {
        if (!q || !q.options) return [];
        return shuffleOptions ? shuffleArray([...q.options]) : q.options;
      }, [q, shuffleOptions]);

      const isCorrect = value && q && value === q.correct;

      const goNext = () => setCurrentIndex(i => Math.min(i + 1, total - 1));
      const goPrev = () => setCurrentIndex(i => Math.max(i - 1, 0));
      const goTo = (i) => setCurrentIndex(Math.min(Math.max(0, i), total - 1));
      const onSubmit = () => { if (value) setRevealed(r => ({ ...r, [qIndex]: true })); };
      const onSelect = (opt) => { if (!shown) setAnswers(a => ({ ...a, [qIndex]: opt })); };
      const handleReset = () => { setAnswers({}); setRevealed({}); setCurrentIndex(0); };

      const summary = computeSummary(combinedData.questions, answers);

      if (!combinedData.questions.length) {
        return (
          <Wrap>
            <Card>
              <Header title="BIO 210 Cell Cycle Review" subtitle="No questions loaded. Please select a quiz set." />
            </Card>
            <style>{styles}</style>
          </Wrap>
        );
      }

      return (
        <Wrap>
          <div className="grid grid-cols-1 lg:grid-cols-[1fr_320px] gap-6 items-start">
            <Card>
              <Header title="Cell Cycle Review" subtitle="Lecture 8-9: Mitosis & Meiosis" />
              <Toolbar>
                <button className="btn" onClick={() => setShuffle(s => !s)}>Shuffle Questions: {shuffle ? "On" : "Off"}</button>
                <button className="btn" onClick={() => setShuffleOptions(s => !s)}>Shuffle Answers: {shuffleOptions ? "On" : "Off"}</button>
                <button className="btn" onClick={handleReset}>Reset Progress</button>
              </Toolbar>

              <hr className="my-4" />

              <div className="flex items-center justify-between gap-3 mb-2">
                <span className="pill">Question {currentIndex + 1} of {total}</span>
                <span className="pill">Answered {summary.answered}/{total}</span>
              </div>

              <h2 className="text-xl font-semibold leading-tight mb-3">{q?.prompt}</h2>

              <div role="radiogroup" aria-label={`Choices for question ${currentIndex + 1}`} className="space-y-2">
                {displayedOptions.map(opt => {
                  const id = `q${qIndex}_${opt.key}`;
                  const selected = value === opt.key;
                  const correct = q.correct === opt.key;
                  const showFeedback = shown && (selected || correct);
                  return (
                    <label key={opt.key} htmlFor={id} className={`choice ${selected ? "selected" : ""} ${showFeedback ? (correct ? "correct" : selected ? "wrong" : "") : ""}`}>
                      <input
                        type="radio"
                        id={id}
                        name={`q_${qIndex}`}
                        checked={!!selected}
                        onChange={() => onSelect(opt.key)}
                        disabled={shown}
                      />
                      <span className="key">{opt.key.toUpperCase()}</span>
                      <span>{opt.text}</span>
                    </label>
                  );
                })}
              </div>

              <div className="flex flex-wrap gap-3 mt-4">
                <button className="btn" onClick={goPrev} disabled={currentIndex === 0}>Prev</button>
                <button className="btn primary" onClick={onSubmit} disabled={!value || shown}>{shown ? "Answered" : "Check answer"}</button>
                <button className="btn" onClick={goNext} disabled={currentIndex === total - 1}>Next</button>
              </div>

              {shown && q && (
                <div className={`mt-4 p-3 rounded-lg ${isCorrect ? "bg-emerald-50 border border-emerald-200" : "bg-rose-50 border border-rose-200"}`}>
                  <div className="font-medium mb-1">{isCorrect ? "Correct 👍" : "Incorrect 👎"}</div>
                  {!isCorrect && (
                    <div className="text-sm mb-1">The correct answer is <span className="font-semibold">{q.correct?.toUpperCase()}</span> — {getOptionText(q, q.correct)}</div>
                  )}
                </div>
              )}
            </Card>

            <aside className="space-y-6">
              <Card>
                <h3 className="font-semibold mb-2">Progress</h3>
                {shuffledOrder.length > 0 ? (
                  <div className="grid grid-cols-6 gap-2">
                    {shuffledOrder.map((idx, i) => {
                      const actualQuestion = combinedData.questions[idx];
                      const isCurrent = i === currentIndex;
                      const isRevealed = !!revealed[idx];
                      const answered = !!answers[idx];
                      const correct = answered && actualQuestion && answers[idx] === actualQuestion.correct;

                      let colorClass = "bg-slate-200";
                      if (isRevealed) colorClass = correct ? "bg-emerald-200" : "bg-rose-200";

                      return (
                        <button
                          key={`${idx}-${i}`}
                          className={`tiny ${isCurrent ? "ring-2 ring-blue-400" : ""} ${colorClass}`}
                          title={`Q${actualQuestion?.number ?? (idx + 1)}`}
                          onClick={() => goTo(i)}
                        >
                          {i + 1}
                        </button>
                      );
                    })}
                  </div>
                ) : <p>Loading progress...</p>}
              </Card>

              <Card>
                <h3 className="font-semibold mb-2">Summary</h3>
                <ul className="text-sm space-y-1">
                  <li>Answered: {summary.answered} / {total}</li>
                  <li>Correct: {summary.correct}</li>
                  <li>Score: {total > 0 ? Math.round(summary.score * 100) : 0}%</li>
                </ul>
              </Card>
            </aside>
          </div>

          <Footer />
          <style>{styles}</style>
        </Wrap>
      );
    }

    // =================== Components ===================
    function Wrap({ children }) {
      return (
        <div className="min-h-screen bg-slate-50 text-slate-900">
          <div className="max-w-5xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6">{children}</div>
        </div>
      );
    }
    function Header({ title, subtitle }) {
      return (
        <header className="space-y-1 mb-4">
          <h1 className="text-2xl sm:text-3xl font-bold tracking-tight">{title}</h1>
          <p className="opacity-80">{subtitle}</p>
        </header>
      );
    }
    function Card({ children }) {
      return <section className="bg-white rounded-2xl shadow-sm border border-slate-200 p-4 sm:p-6">{children}</section>;
    }
    function Toolbar({ children }) { return <div className="flex items-center gap-3 flex-wrap">{children}</div>; }

    // =================== Parser & Helpers ===================
    function parseQuestions(raw) {
      const cleanRaw = raw
        .replace(/\r\n/g, "\n")
        .replace(/\r/g, "\n")
        .replace(/[\u2018\u2019]/g, "'")
        .replace(/[\u201C\u201D]/g, '"')
        .replace(/\u2013/g, '-')
        .replace(/\u2014/g, '--')
        .replace(/\u2026/g, '...')
        .replace(/[\u00A0\u200B\u202F\uFEFF]/g, " ");

      const parts = cleanRaw.split(/\s*Answer Key\s*\n/);
      const body = parts[0] || "";
      const keyText = parts[1] || "";

      const key = new Map();
      if (keyText) {
        let sequentialIndex = 1;
        keyText.split(/\n+/).forEach(line => {
          const trimmed = line.trim();
          const m = trimmed.match(/^(\d+)\.\s*([a-d])/i) || trimmed.match(/^([a-d])/i);
          if (m) {
            const letter = m[m.length - 1].toLowerCase();
            if (m[1] && !isNaN(parseInt(m[1]))) key.set(parseInt(m[1]), letter);
            else key.set(sequentialIndex, letter);
            sequentialIndex++;
          }
        });
      }

      const blocks = body.split(/\n\s*(?=\d+\.)/);
      const questions = [];
      const optionMarkerRegex = /\s*o\s+([a-d])\)/i;

      for (let block of blocks) {
        block = block.trim();
        if (!block) continue;

        // FIX: strip bracketed source tags safely
        block = block.replace(/【[^】]*】/g, '').trim();

        const qNumMatch = block.match(/^(\d+)\.\s*(.*)/s);
        if (!qNumMatch) continue;

        const qNum = parseInt(qNumMatch[1], 10);
        let content = qNumMatch[2].trim();

        let promptText = '';
        const options = [];

        const firstOptionIndex = content.search(optionMarkerRegex);

        if (firstOptionIndex !== -1) {
          promptText = content.substring(0, firstOptionIndex).trim();
          const optionsString = content.substring(firstOptionIndex);
          const fullOptionRegex = /\s*o\s+([a-d])\)\s*(.*?)(?=\s*o\s+[a-d]\)|\s*$)/gis;
          let match;
          while ((match = fullOptionRegex.exec(optionsString)) !== null) {
            options.push({ key: match[1].toLowerCase(), text: match[2].trim() });
          }
        } else {
          promptText = content;
        }

        if (promptText && options.length >= 2) {
          options.sort((a, b) => a.key.localeCompare(b.key));
          questions.push({ number: qNum, prompt: promptText, options, correct: key.get(qNum) || '' });
        }
      }

      questions.sort((a, b) => a.number - b.number);
      return { questions };
    }

    function shuffleArray(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function getOptionText(q, key) {
      const o = q?.options?.find(o => o.key === key);
      return o?.text || "";
    }

    function computeSummary(questions, answers) {
      let answered = 0, correct = 0;
      questions.forEach((q, idx) => {
        const a = answers[idx];
        if (a) {
          answered++;
          if (a === q.correct) correct++;
        }
      });
      const score = questions.length > 0 ? correct / questions.length : 0;
      return { answered, correct, score };
    }

    const styles = `
    :root { --txt:#0f172a; --muted:#64748b; --brand:#2563eb; }
    * { box-sizing: border-box; }
    body { margin: 0; }
    .btn { border:1px solid #d1d5db; background:#f3f4f6; padding:.5rem .8rem; border-radius:.75rem; font-weight:600; cursor:pointer; font-size:.875rem; }
    .btn:hover:not(:disabled){ border-color:#9ca3af; background:#e5e7eb; }
    .btn:disabled{ opacity:.5; cursor:not-allowed; }
    .btn.primary{ background:#2563eb; color:white; border-color:#1d4ed8; }
    .btn.primary:hover:not(:disabled){ background:#1d4ed8; border-color:#1e40af; }
    .choice{ display:flex; gap:.6rem; align-items:flex-start; border:1px solid #e2e8f0; padding:.6rem .75rem; border-radius:.75rem; cursor:pointer; }
    .choice:hover{ background:#f8fafc; }
    .choice .key{ min-width:1.5rem; text-align:center; font-weight:700; opacity:.7; }
    .choice.selected{ border-color:#94a3b8; background:#f1f5f9; }
    .choice.correct{ border-color:#34d399; background:#ecfdf5; }
    .choice.wrong{ border-color:#fca5a5; background:#fff1f2; }
    .pill{ font-size:.8rem; padding:.15rem .5rem; background:#f1f5f9; border:1px solid #e2e8f0; border-radius:999px; }
    .tiny{ width:2rem; height:2rem; border-radius:.5rem; border:1px solid #cbd5e1; font-weight:600; font-size:.75rem; display:flex; align-items:center; justify-content:center; }
    `;

    function Footer() {
      return <footer className="text-xs opacity-70 text-center py-6">Built for spaced practice and rapid review.</footer>;
    }

    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
  </script>
</body>
</html>
